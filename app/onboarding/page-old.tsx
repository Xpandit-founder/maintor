'use client';

import { useState, useEffect } from 'react';

export default function OnboardingPage() {
  return (
    <>
      <style jsx global>{`
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, sans-serif; background: #0F1110; min-height: 100vh; }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-8px); } }
        @keyframes fade-in { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slide-up { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slide-in { from { opacity: 0; transform: translateX(-20px); } to { opacity: 1; transform: translateX(0); } }
        @keyframes pop { 0% { transform: scale(0); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
        @keyframes antenna-blink { 0%, 90%, 100% { opacity: 0.5; } 95% { opacity: 1; } }
        @keyframes wave { 0%, 100% { transform: rotate(-5deg); } 50% { transform: rotate(5deg); } }
        @keyframes pulse-text { 0%, 100% { opacity: 0.5; } 50% { opacity: 1; } }
        .animate-float { animation: float 3s ease-in-out infinite; }
        .animate-fade-in { animation: fade-in 0.5s ease-out forwards; opacity: 0; }
        .animate-slide-up { animation: slide-up 0.4s ease-out forwards; opacity: 0; }
        .animate-slide-in { animation: slide-in 0.4s ease-out forwards; opacity: 0; }
        .animate-pop { animation: pop 0.4s ease-out forwards; }
        .animate-pulse-text { animation: pulse-text 1.5s ease-in-out infinite; }
        .btn { transition: all 0.15s ease; cursor: pointer; border: none; outline: none; }
        .btn:hover:not(:disabled) { transform: scale(1.02); }
        .btn:active:not(:disabled) { transform: scale(0.98) translateY(2px); }
        .btn:disabled { cursor: not-allowed; opacity: 0.5; }
        .input-field { transition: all 0.2s ease; }
        .input-field:focus { border-color: #10B981 !important; box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.2); outline: none; }
        .input-field::placeholder { color: #6B7280; }
        .option-card { transition: all 0.15s ease; cursor: pointer; }
        .option-card:hover { transform: translateX(4px); background: rgba(16, 185, 129, 0.1) !important; }
        .social-btn { transition: all 0.15s ease; }
        .social-btn:hover { background: #252829 !important; }
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
      `}</style>
      <div
        dangerouslySetInnerHTML={{
          __html: `
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Maintor - Onboarding</title>
</head>
<body>
  <div id="app"></div>
  <script>
    const C = { primary: '#10B981', primaryDark: '#059669', primaryDarker: '#047857', primaryGlow: 'rgba(16, 185, 129, 0.15)', bgDark: '#0F1110', bgCard: '#1A1D1E', bgElevated: '#252829', border: '#2A2D2E', text: '#FFFFFF', textSecondary: '#9CA3AF', textMuted: '#6B7280', accent: '#38BDF8', error: '#EF4444', sand: '#FCD34D' };

    let step = 0, isLoginMode = false, whatToLearn = '', whyLearning = '', experience = '', dailyGoal = '', howHeard = '', age = '', name = '', email = '', password = '', showPassword = false, emailError = '';

    function robotMascot(size = 120, emotion = 'default', animate = true) {
      const floatClass = animate ? 'animate-float' : '';
      const isExcited = emotion === 'excited';
      return '<div class="relative ' + floatClass + '" style="width:' + size + 'px;height:' + (size * 1.2) + 'px"><svg viewBox="0 0 200 240" fill="none"><g style="transform-origin: 140px 45px;' + (animate ? 'animation: wave 2s ease-in-out infinite;' : '') + '"><line x1="140" y1="45" x2="165" y2="15" stroke="#10B981" stroke-width="4" stroke-linecap="round"/><circle cx="165" cy="15" r="8" fill="#10B981"/><circle cx="165" cy="15" r="5" fill="#34D399" style="animation: antenna-blink 2s ease-in-out infinite;"/></g><ellipse cx="45" cy="95" rx="20" ry="25" fill="#1A1D1E" stroke="#2A2D2E" stroke-width="2"/><ellipse cx="45" cy="95" rx="15" ry="20" fill="#10B981"/><ellipse cx="155" cy="95" rx="20" ry="25" fill="#1A1D1E" stroke="#2A2D2E" stroke-width="2"/><ellipse cx="155" cy="95" rx="15" ry="20" fill="#10B981"/><path d="M 55 55 Q 100 25 145 55" stroke="#1A1D1E" stroke-width="8" fill="none" stroke-linecap="round"/><ellipse cx="100" cy="95" rx="55" ry="50" fill="#1A1D1E" stroke="#2A2D2E" stroke-width="3"/><circle cx="125" cy="55" r="6" fill="#10B981" opacity="0.8"/>' + (isExcited ? '<text x="62" y="105" font-size="28" fill="#10B981">‚òÖ</text><text x="108" y="105" font-size="28" fill="#10B981">‚òÖ</text>' : '<circle cx="75" cy="90" r="12" fill="#0F1110"/><circle cx="125" cy="90" r="12" fill="#0F1110"/><circle cx="75" cy="90" r="8" fill="#10B981"/><circle cx="125" cy="90" r="8" fill="#10B981"/><circle cx="72" cy="87" r="3" fill="white" opacity="0.8"/><circle cx="122" cy="87" r="3" fill="white" opacity="0.8"/>') + '<path d="M 80 115 Q 100 ' + (isExcited ? '135' : '130') + ' 120 115" stroke="#10B981" stroke-width="4" fill="none" stroke-linecap="round"/><path d="M 60 145 Q 60 180 80 200 L 120 200 Q 140 180 140 145 Z" fill="#1A1D1E" stroke="#2A2D2E" stroke-width="3"/><g style="' + (animate ? 'animation: wave 1.5s ease-in-out infinite;' : '') + 'transform-origin: 55px 155px;"><ellipse cx="45" cy="165" rx="12" ry="18" fill="#1A1D1E" stroke="#2A2D2E" stroke-width="2"/><ellipse cx="45" cy="180" rx="10" ry="12" fill="#10B981"/></g><g style="' + (animate ? 'animation: wave 1.5s ease-in-out infinite 0.5s;' : '') + 'transform-origin: 145px 155px;"><ellipse cx="155" cy="165" rx="12" ry="18" fill="#1A1D1E" stroke="#2A2D2E" stroke-width="2"/><ellipse cx="155" cy="180" rx="10" ry="12" fill="#10B981"/></g><ellipse cx="85" cy="215" rx="18" ry="12" fill="#1A1D1E" stroke="#2A2D2E" stroke-width="2"/><ellipse cx="115" cy="215" rx="18" ry="12" fill="#1A1D1E" stroke="#2A2D2E" stroke-width="2"/></svg></div>';
    }

    function smallMascot(size = 50) {
      return '<div style="width:' + size + 'px;height:' + size + 'px"><svg viewBox="0 0 100 100" fill="none"><ellipse cx="50" cy="50" rx="35" ry="32" fill="#1A1D1E" stroke="#2A2D2E" stroke-width="3"/><circle cx="38" cy="48" r="6" fill="#0F1110"/><circle cx="62" cy="48" r="6" fill="#0F1110"/><circle cx="38" cy="48" r="4" fill="#10B981"/><circle cx="62" cy="48" r="4" fill="#10B981"/><circle cx="36" cy="46" r="1.5" fill="white" opacity="0.8"/><circle cx="60" cy="46" r="1.5" fill="white" opacity="0.8"/><path d="M 40 62 Q 50 70 60 62" stroke="#10B981" stroke-width="3" fill="none" stroke-linecap="round"/><line x1="70" y1="25" x2="80" y2="10" stroke="#10B981" stroke-width="3" stroke-linecap="round"/><circle cx="80" cy="10" r="5" fill="#10B981"/><circle cx="80" cy="10" r="3" fill="#34D399"/></svg></div>';
    }

    function bubble(text, delay) { delay = delay || 0; return '<div class="relative animate-fade-in" style="animation-delay:' + delay + 's"><div class="relative px-6 py-4 rounded-2xl" style="background:' + C.bgCard + ';border:1px solid ' + C.border + '"><p class="text-lg leading-relaxed text-center" style="color:' + C.text + '">' + text + '</p></div><div class="absolute -bottom-2 left-1/2 -translate-x-1/2 w-4 h-4 rotate-45" style="background:' + C.bgCard + ';border-right:1px solid ' + C.border + ';border-bottom:1px solid ' + C.border + '"></div></div>'; }

    function progressBar(pct) { return '<div class="w-full h-3 rounded-full overflow-hidden" style="background:' + C.bgElevated + '"><div class="h-full rounded-full transition-all duration-500" style="width:' + pct + '%;background:linear-gradient(90deg, ' + C.primary + ', ' + C.primaryDark + ')"></div></div>'; }

    function primaryBtn(text, action, disabled) {
      return '<button class="btn w-full py-4 rounded-2xl font-bold text-base uppercase tracking-wider" style="background:' + (disabled ? C.bgElevated : 'linear-gradient(135deg, ' + C.primary + ' 0%, ' + C.primaryDark + ' 100%)') + ';color:' + (disabled ? C.textMuted : 'white') + ';box-shadow:' + (disabled ? 'none' : '0 4px 0 ' + C.primaryDarker) + '" onclick="' + action + '"' + (disabled ? ' disabled' : '') + '>' + text + '</button>';
    }

    function ghostBtn(text, action) { return '<button class="btn w-full py-3 font-bold text-base uppercase tracking-wider bg-transparent" style="color:' + C.primary + '" onclick="' + action + '">' + text + '</button>'; }

    function header(showBack, totalSteps) {
      showBack = showBack !== false;
      totalSteps = totalSteps || 17;
      var pct = Math.min(100, (step / totalSteps) * 100);
      return '<div class="sticky top-0 z-50 px-4 pt-4 pb-2" style="background:' + C.bgDark + '"><div class="flex items-center gap-4 max-w-lg mx-auto">' + (showBack ? '<button onclick="goBack()" class="p-2 -ml-2" style="color:' + C.textMuted + '"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg></button>' : '') + '<div class="flex-1">' + progressBar(pct) + '</div></div></div>';
    }

    function socialButtons() {
      return '<div class="space-y-3 mt-6"><div class="flex items-center gap-4 mb-4"><div class="flex-1 h-px" style="background:' + C.border + '"></div><span class="text-sm font-medium" style="color:' + C.textMuted + '">OR</span><div class="flex-1 h-px" style="background:' + C.border + '"></div></div><button class="social-btn w-full py-4 rounded-2xl border flex items-center justify-center gap-3 font-bold text-sm uppercase" style="border-color:' + C.border + ';color:' + C.text + ';background:' + C.bgCard + '"><svg class="w-5 h-5" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>Sign up with Google</button><button class="social-btn w-full py-4 rounded-2xl border flex items-center justify-center gap-3 font-bold text-sm uppercase" style="border-color:' + C.border + ';color:' + C.text + ';background:' + C.bgCard + '"><svg class="w-5 h-5" fill="white" viewBox="0 0 24 24"><path d="M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"/></svg>Sign up with Apple</button></div>';
    }

    function welcomeScreen() {
      return '<div class="min-h-screen flex flex-col items-center justify-center p-6" style="background:' + C.bgDark + '"><div class="flex-1 flex flex-col items-center justify-center"><div class="animate-pop">' + robotMascot(180, 'default', true) + '</div><h1 class="text-4xl font-bold mt-4 animate-fade-in" style="color:' + C.primary + ';animation-delay:0.2s">maintor</h1><p class="text-lg mt-2 animate-fade-in" style="color:' + C.textMuted + ';animation-delay:0.3s">Learn AI. For free. Forever.</p></div><div class="w-full max-w-sm space-y-3 animate-fade-in" style="animation-delay:0.4s">' + primaryBtn('Get Started', 'goNext()') + '<button onclick="goToLogin()" class="btn w-full py-4 rounded-2xl font-bold text-base uppercase tracking-wider border-2" style="border-color:' + C.primary + ';color:' + C.primary + ';background:transparent">I Already Have An Account</button></div></div>';
    }

    function loginScreen() {
      var emailValid = email.includes('@') && email.includes('.');
      var canLogin = emailValid && password.length > 0;
      return '<div class="min-h-screen flex flex-col" style="background:' + C.bgDark + '"><div class="p-4"><button onclick="goToWelcome()" class="p-2 -ml-2" style="color:' + C.textMuted + '"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg></button></div><div class="flex-1 p-6"><h1 class="text-2xl font-bold mb-6" style="color:' + C.text + '">Log in</h1><div class="relative mb-4"><input id="loginEmail" type="email" placeholder="Email" class="input-field w-full px-4 py-4 pr-14 rounded-2xl text-lg" style="background:' + C.bgCard + ';border:2px solid ' + (emailValid ? C.primary : C.border) + ';color:' + C.text + '" oninput="updateLoginEmail(this.value)"/><div id="loginEmailIcon" class="absolute right-4 top-1/2 -translate-y-1/2">' + (emailValid ? '<div class="w-6 h-6 rounded-full flex items-center justify-center" style="background:' + C.accent + '"><svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/></svg></div>' : '') + '</div></div><div class="relative mb-4"><input id="loginPassword" type="' + (showPassword ? 'text' : 'password') + '" placeholder="Password" class="input-field w-full px-4 py-4 pr-14 rounded-2xl text-lg" style="background:' + C.bgCard + ';border:2px solid ' + (password.length > 0 ? C.primary : C.border) + ';color:' + C.text + '" oninput="updateLoginPassword(this.value)"/><button type="button" onclick="toggleLoginPassword()" class="absolute right-4 top-1/2 -translate-y-1/2" style="color:' + C.primary + '"><svg id="loginEyeIcon" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">' + (showPassword ? '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>' : '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"/>') + '</svg></button></div><button class="text-sm font-bold mb-6" style="color:' + C.primary + '">FORGOT PASSWORD?</button><button id="loginBtn" class="btn w-full py-4 rounded-2xl font-bold text-base uppercase tracking-wider" style="background:' + (canLogin ? 'linear-gradient(135deg, ' + C.primary + ' 0%, ' + C.primaryDark + ' 100%)' : C.bgElevated) + ';color:' + (canLogin ? 'white' : C.textMuted) + ';box-shadow:' + (canLogin ? '0 4px 0 ' + C.primaryDarker : 'none') + '" onclick="handleLogin()"' + (!canLogin ? ' disabled' : '') + '>Log In</button><div class="flex items-center gap-4 my-6"><div class="flex-1 h-px" style="background:' + C.border + '"></div><span class="text-sm font-medium" style="color:' + C.textMuted + '">OR</span><div class="flex-1 h-px" style="background:' + C.border + '"></div></div><button class="social-btn w-full py-4 rounded-2xl border flex items-center justify-center gap-3 font-bold text-sm uppercase mb-3" style="border-color:' + C.border + ';color:' + C.text + ';background:' + C.bgCard + '"><svg class="w-5 h-5" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>Log in with Google</button><button class="social-btn w-full py-4 rounded-2xl border flex items-center justify-center gap-3 font-bold text-sm uppercase" style="border-color:' + C.border + ';color:' + C.text + ';background:' + C.bgCard + '"><svg class="w-5 h-5" fill="white" viewBox="0 0 24 24"><path d="M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"/></svg>Log in with Apple</button></div></div>';
    }

    function createProfilePrompt() { return '<div class="min-h-screen flex flex-col" style="background:' + C.bgDark + '"><div class="flex-1 flex flex-col items-center justify-center p-6"><div class="mb-6 animate-fade-in">' + bubble("Don't lose your progress! Let's create a profile.") + '</div><div class="animate-pop" style="animation-delay:0.3s">' + robotMascot(180, 'default', true) + '</div></div><div class="p-6 space-y-3">' + primaryBtn('Create Profile', 'goNext()') + ghostBtn('Later', 'skipToOnboarding()') + '</div></div>'; }

    function ageScreen() {
      var hasValue = age.length > 0;
      var isValid = hasValue && parseInt(age) > 0 && parseInt(age) < 120;
      return '<div class="min-h-screen flex flex-col" style="background:' + C.bgDark + '">' + header(false) + '<div class="flex-1 p-6"><h1 class="text-2xl font-bold mb-4 animate-fade-in" style="color:' + C.text + '">How old are you?</h1><div class="relative animate-slide-up" style="animation-delay:0.1s"><input id="age" type="number" placeholder="Age" class="input-field w-full px-4 py-4 pr-14 rounded-2xl text-lg" style="background:' + C.bgCard + ';border:2px solid ' + (isValid ? C.primary : C.border) + ';color:' + C.text + '" oninput="updateAge(this.value)"/><div id="ageIcon" class="absolute right-4 top-1/2 -translate-y-1/2">' + (isValid ? '<div class="w-6 h-6 rounded-full flex items-center justify-center" style="background:' + C.accent + '"><svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/></svg></div>' : '') + '</div></div></div><div class="p-6 space-y-4"><button id="ageBtn" type="button" class="btn w-full py-4 rounded-2xl font-bold text-base uppercase tracking-wider" style="background:' + (isValid ? 'linear-gradient(135deg, ' + C.primary + ' 0%, ' + C.primaryDark + ' 100%)' : C.bgElevated) + ';color:' + (isValid ? 'white' : C.textMuted) + ';box-shadow:' + (isValid ? '0 4px 0 ' + C.primaryDarker : 'none') + '" onclick="goNext()"' + (!isValid ? ' disabled' : '') + '>Next</button><p class="text-center text-sm" style="color:' + C.textMuted + '">By signing in to Maintor, you agree to our <span class="font-bold" style="color:' + C.textSecondary + '">Terms</span> and <span class="font-bold" style="color:' + C.textSecondary + '">Privacy Policy</span>.</p></div></div>';
    }

    function nameScreen() {
      var hasValue = name.length > 0;
      return '<div class="min-h-screen flex flex-col" style="background:' + C.bgDark + '">' + header() + '<div class="flex-1 p-6"><h1 class="text-2xl font-bold mb-4 animate-fade-in" style="color:' + C.text + '">What is your name?</h1><div class="relative animate-slide-up" style="animation-delay:0.1s"><input id="name" type="text" placeholder="Name" class="input-field w-full px-4 py-4 pr-14 rounded-2xl text-lg" style="background:' + C.bgCard + ';border:2px solid ' + (hasValue ? C.primary : C.border) + ';color:' + C.text + '" oninput="updateName(this.value)"/><div id="nameIcon" class="absolute right-4 top-1/2 -translate-y-1/2">' + (hasValue ? '<div class="w-6 h-6 rounded-full flex items-center justify-center" style="background:' + C.accent + '"><svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/></svg></div>' : '') + '</div></div><div class="mt-4 animate-slide-up" style="animation-delay:0.2s"><button id="nameBtn" type="button" class="btn w-full py-4 rounded-2xl font-bold text-base uppercase tracking-wider" style="background:' + (hasValue ? 'linear-gradient(135deg, ' + C.primary + ' 0%, ' + C.primaryDark + ' 100%)' : C.bgElevated) + ';color:' + (hasValue ? 'white' : C.textMuted) + ';box-shadow:' + (hasValue ? '0 4px 0 ' + C.primaryDarker : 'none') + '" onclick="goNext()"' + (!hasValue ? ' disabled' : '') + '>Next</button></div>' + socialButtons() + '</div></div>';
    }

    function emailScreen() {
      var hasValue = email.length > 0;
      var isValid = email.includes('@') && email.includes('.');
      var borderColor = emailError ? C.error : (isValid ? C.primary : C.border);
      return '<div class="min-h-screen flex flex-col" style="background:' + C.bgDark + '">' + header() + '<div class="flex-1 p-6"><h1 class="text-2xl font-bold mb-4 animate-fade-in" style="color:' + C.text + '">What is your email' + (name ? ', ' + name : '') + '?</h1><div class="relative animate-slide-up" style="animation-delay:0.1s"><input id="email" type="email" placeholder="Email" class="input-field w-full px-4 py-4 pr-14 rounded-2xl text-lg" style="background:' + C.bgCard + ';border:2px solid ' + borderColor + ';color:' + C.text + '" oninput="updateEmail(this.value)"/><div id="emailIcons" class="absolute right-4 top-1/2 -translate-y-1/2 flex items-center gap-2">' + (hasValue ? (isValid && !emailError ? '<div class="w-6 h-6 rounded-full flex items-center justify-center" style="background:' + C.accent + '"><svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/></svg></div>' : '<button type="button" onclick="clearEmail()" class="w-6 h-6 rounded-full flex items-center justify-center" style="background:' + C.textMuted + '"><svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg></button>') : '') + '</div></div>' + (emailError ? '<p id="emailError" class="mt-2 text-sm font-medium animate-fade-in" style="color:' + C.error + '">' + emailError + '</p>' : '<p id="emailError" class="mt-2 text-sm font-medium" style="color:' + C.error + ';display:none"></p>') + '</div><div class="p-6"><button id="emailBtn" type="button" class="btn w-full py-4 rounded-2xl font-bold text-base uppercase tracking-wider" style="background:' + (hasValue ? 'linear-gradient(135deg, ' + C.primary + ' 0%, ' + C.primaryDark + ' 100%)' : C.bgElevated) + ';color:' + (hasValue ? 'white' : C.textMuted) + ';box-shadow:' + (hasValue ? '0 4px 0 ' + C.primaryDarker : 'none') + '" onclick="validateEmail()"' + (!hasValue ? ' disabled' : '') + '>Next</button></div></div>';
    }

    function passwordScreen() {
      var hasValue = password.length > 0;
      var isValid = password.length >= 6;
      return '<div class="min-h-screen flex flex-col" style="background:' + C.bgDark + '">' + header() + '<div class="flex-1 p-6"><h1 class="text-2xl font-bold mb-4 animate-fade-in" style="color:' + C.text + '">Create a password</h1><div class="relative animate-slide-up" style="animation-delay:0.1s"><input id="password" type="' + (showPassword ? 'text' : 'password') + '" placeholder="Password" class="input-field w-full px-4 py-4 pr-14 rounded-2xl text-lg" style="background:' + C.bgCard + ';border:2px solid ' + (isValid ? C.primary : C.border) + ';color:' + C.text + '" oninput="updatePassword(this.value)"/><button type="button" onclick="togglePasswordView()" class="absolute right-4 top-1/2 -translate-y-1/2" style="color:' + C.primary + '"><svg id="eyeIcon" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">' + (showPassword ? '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>' : '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"/>') + '</svg></button></div><p id="passwordHint" class="mt-2 text-sm" style="color:' + C.textMuted + ';display:' + ((!isValid && hasValue) ? 'block' : 'none') + '">Password must be at least 6 characters</p></div><div class="p-6 space-y-4"><button id="passwordBtn" type="button" class="btn w-full py-4 rounded-2xl font-bold text-base uppercase tracking-wider" style="background:' + (isValid ? 'linear-gradient(135deg, ' + C.primary + ' 0%, ' + C.primaryDark + ' 100%)' : C.bgElevated) + ';color:' + (isValid ? 'white' : C.textMuted) + ';box-shadow:' + (isValid ? '0 4px 0 ' + C.primaryDarker : 'none') + '" onclick="goNext()"' + (!isValid ? ' disabled' : '') + '>Create Profile</button><p class="text-center text-sm" style="color:' + C.textMuted + '">By signing in to Maintor, you agree to our <span class="font-bold" style="color:' + C.textSecondary + '">Terms</span> and <span class="font-bold" style="color:' + C.textSecondary + '">Privacy Policy</span>.</p></div></div>';
    }

    function profileSuccessScreen() { var displayName = name || 'Learner'; return '<div class="min-h-screen flex flex-col" style="background:' + C.bgDark + '"><div class="flex-1 flex flex-col items-center justify-center p-6"><div class="mb-6 animate-fade-in">' + bubble('Welcome, ' + displayName + '! Your profile has been created.') + '</div><div class="animate-pop" style="animation-delay:0.3s">' + robotMascot(180, 'excited', true) + '</div></div><div class="p-6">' + primaryBtn('Continue', 'goNext()') + '</div></div>'; }

    function introScreen(msg, highlight) {
      var displayMsg = msg;
      if (highlight) displayMsg = msg.replace(highlight, '<span style="color:' + C.sand + ';font-weight:bold">' + highlight + '</span>');
      return '<div class="min-h-screen flex flex-col" style="background:' + C.bgDark + '">' + header() + '<div class="flex-1 flex flex-col items-center justify-center p-6"><div class="max-w-sm">' + bubble(displayMsg) + '<div class="mt-6 flex justify-center">' + robotMascot(140, 'default', true) + '</div></div></div><div class="p-6"><div class="max-w-sm mx-auto">' + primaryBtn('Continue', 'goNext()') + '</div></div></div>';
    }

    function whatToLearnScreen() {
      var opts = [{id:'chatbots',icon:'üí¨',label:'AI Chatbots',sub:'ChatGPT, Claude'},{id:'images',icon:'üé®',label:'Image Generation',sub:'Midjourney, DALL¬∑E'},{id:'writing',icon:'‚úçÔ∏è',label:'AI Writing',sub:'Content & docs'},{id:'coding',icon:'üíª',label:'AI Coding',sub:'Copilot, Cursor'},{id:'productivity',icon:'‚ö°',label:'Productivity',sub:'Automation'},{id:'all',icon:'üéØ',label:'Everything!',sub:'Complete journey'}];
      return '<div class="min-h-screen flex flex-col" style="background:' + C.bgDark + '">' + header() + '<div class="flex-1 flex flex-col p-6 pt-2 overflow-hidden"><div class="flex items-start gap-3 mb-4"><div class="flex-shrink-0">' + smallMascot(50) + '</div><div class="flex-1">' + bubble('What would you like to learn?', 0.1) + '</div></div><div class="flex-1 space-y-2 overflow-y-auto hide-scrollbar pb-4">' + opts.map(function(o, i) { var sel = whatToLearn === o.id; return '<button onclick="setOption(\'whatToLearn\',\'' + o.id + '\')" class="option-card w-full p-4 rounded-xl flex items-center gap-4 text-left border animate-slide-in" style="background:' + (sel ? C.primaryGlow : C.bgCard) + ';border-color:' + (sel ? C.primary : C.border) + ';animation-delay:' + (0.1 + i * 0.05) + 's"><span class="text-2xl">' + o.icon + '</span><span class="font-semibold flex-1" style="color:' + (sel ? C.primary : C.text) + '">' + o.label + '</span><span class="text-sm" style="color:' + C.textMuted + '">' + o.sub + '</span></button>'; }).join('') + '</div></div><div class="p-6 pt-0"><div class="max-w-lg mx-auto">' + primaryBtn('Continue', 'goNext()', !whatToLearn) + '</div></div></div>';
    }

    function whyLearningScreen() {
      var opts = [{id:'career',icon:'üíº',label:'Boost my career'},{id:'productivity',icon:'üß†',label:'Be more productive'},{id:'fun',icon:'üéâ',label:'Just for fun'},{id:'creative',icon:'üé®',label:'Creative projects'},{id:'business',icon:'üìà',label:'Grow my business'},{id:'curious',icon:'üîç',label:'Stay curious'}];
      return '<div class="min-h-screen flex flex-col" style="background:' + C.bgDark + '">' + header() + '<div class="flex-1 flex flex-col p-6 pt-2 overflow-hidden"><div class="flex items-start gap-3 mb-6"><div class="flex-shrink-0">' + smallMascot(50) + '</div><div class="flex-1">' + bubble('Why do you want to learn AI?', 0.1) + '</div></div><div class="flex-1 space-y-2 overflow-y-auto hide-scrollbar pb-4">' + opts.map(function(o, i) { var sel = whyLearning === o.id; return '<button onclick="setOption(\'whyLearning\',\'' + o.id + '\')" class="option-card w-full p-4 rounded-xl flex items-center gap-4 text-left border animate-slide-in" style="background:' + (sel ? C.primaryGlow : C.bgCard) + ';border-color:' + (sel ? C.primary : C.border) + ';animation-delay:' + (0.1 + i * 0.05) + 's"><span class="text-2xl">' + o.icon + '</span><span class="font-semibold flex-1" style="color:' + (sel ? C.primary : C.text) + '">' + o.label + '</span></button>'; }).join('') + '</div></div><div class="p-6 pt-0"><div class="max-w-lg mx-auto">' + primaryBtn('Continue', 'goNext()', !whyLearning) + '</div></div></div>';
    }

    function experienceScreen() {
      return '<div class="min-h-screen flex flex-col" style="background:' + C.bgDark + '">' + header() + '<div class="flex-1 flex flex-col p-6 pt-2"><div class="flex items-start gap-3 mb-8"><div class="flex-shrink-0">' + smallMascot(50) + '</div><div class="flex-1">' + bubble('Where would you like to start?', 0.1) + '</div></div><div class="flex-1 space-y-4"><button onclick="setOption(\'experience\',\'beginner\')" class="option-card w-full p-4 rounded-2xl flex items-center gap-4 text-left relative overflow-hidden border animate-fade-in" style="background:' + (experience === 'beginner' ? C.primaryGlow : C.bgCard) + ';border-color:' + (experience === 'beginner' ? C.primary : C.border) + ';animation-delay:0.2s"><div class="absolute top-0 right-0 px-3 py-1 rounded-bl-xl text-xs font-bold uppercase" style="background:' + C.accent + ';color:white">Recommended</div><div class="w-14 h-14 rounded-xl flex items-center justify-center flex-shrink-0" style="background:' + C.primaryGlow + '"><span class="text-2xl">üìñ</span></div><div class="flex-1"><p class="font-semibold text-base" style="color:' + (experience === 'beginner' ? C.primary : C.text) + '">Start from scratch</p><p class="text-sm mt-0.5" style="color:' + C.textMuted + '">Take the easiest lesson</p></div></button><button onclick="setOption(\'experience\',\'intermediate\')" class="option-card w-full p-4 rounded-2xl flex items-center gap-4 text-left border animate-fade-in" style="background:' + (experience === 'intermediate' ? C.primaryGlow : C.bgCard) + ';border-color:' + (experience === 'intermediate' ? C.primary : C.border) + ';animation-delay:0.3s"><div class="w-14 h-14 rounded-xl flex items-center justify-center flex-shrink-0" style="background:' + C.primaryGlow + '"><span class="text-2xl">üß≠</span></div><div class="flex-1"><p class="font-semibold text-base" style="color:' + (experience === 'intermediate' ? C.primary : C.text) + '">Find my level</p><p class="text-sm mt-0.5" style="color:' + C.textMuted + '">Let Maintor recommend</p></div></button></div></div><div class="p-6 pt-0"><div class="max-w-lg mx-auto">' + primaryBtn('Continue', 'goNext()', !experience) + '</div></div></div>';
    }

    function dailyGoalScreen() {
      var opts = [{id:'5',label:'5 min / day',sub:'Casual'},{id:'10',label:'10 min / day',sub:'Regular'},{id:'15',label:'15 min / day',sub:'Serious'},{id:'20',label:'20 min / day',sub:'Intense'}];
      return '<div class="min-h-screen flex flex-col" style="background:' + C.bgDark + '">' + header() + '<div class="flex-1 flex flex-col p-6 pt-2"><div class="flex items-start gap-3 mb-8"><div class="flex-shrink-0">' + smallMascot(50) + '</div><div class="flex-1">' + bubble("What's your daily learning goal?", 0.1) + '</div></div><div class="flex-1 space-y-3">' + opts.map(function(o, i) { var sel = dailyGoal === o.id; return '<button onclick="setOption(\'dailyGoal\',\'' + o.id + '\')" class="option-card w-full p-4 rounded-xl flex items-center justify-between border animate-slide-in" style="background:' + (sel ? C.primaryGlow : C.bgCard) + ';border-color:' + (sel ? C.primary : C.border) + ';animation-delay:' + (0.2 + i * 0.08) + 's"><span class="font-bold text-lg" style="color:' + (sel ? C.primary : C.text) + '">' + o.label + '</span><span style="color:' + C.textMuted + '">' + o.sub + '</span></button>'; }).join('') + '</div></div><div class="p-6 pt-0"><div class="max-w-lg mx-auto">' + primaryBtn("I'm Committed", 'goNext()', !dailyGoal) + '</div></div></div>';
    }

    function benefitsScreen() {
      var items = [{icon:'üí¨',title:'Chat with confidence',sub:'Stress-free prompting'},{icon:'üß†',title:'Build AI skills',sub:'Practical techniques'},{icon:'‚è∞',title:'Develop a habit',sub:'Smart reminders'}];
      return '<div class="min-h-screen flex flex-col" style="background:' + C.bgDark + '">' + header() + '<div class="flex-1 flex flex-col p-6 pt-2"><div class="flex items-start gap-3 mb-8"><div class="flex-shrink-0">' + smallMascot(50) + '</div><div class="flex-1">' + bubble("Here's what you can achieve!", 0.1) + '</div></div><div class="flex-1 space-y-6">' + items.map(function(item, i) { return '<div class="flex items-center gap-4 animate-slide-in" style="animation-delay:' + (0.3 + i * 0.15) + 's"><div class="w-14 h-14 rounded-xl flex items-center justify-center" style="background:' + C.primaryGlow + '"><span class="text-2xl">' + item.icon + '</span></div><div><p class="font-semibold" style="color:' + C.text + '">' + item.title + '</p><p class="text-sm" style="color:' + C.textMuted + '">' + item.sub + '</p></div></div>'; }).join('') + '</div></div><div class="p-6 pt-0"><div class="max-w-lg mx-auto">' + primaryBtn('Continue', 'goNext()') + '</div></div></div>';
    }

    function howHeardScreen() {
      var opts = ['YouTube', 'X (Twitter)', 'TikTok', 'Friends/family', 'Google Search', 'LinkedIn', 'Other'];
      return '<div class="min-h-screen flex flex-col" style="background:' + C.bgDark + '">' + header() + '<div class="flex-1 flex flex-col p-6 pt-2 overflow-hidden"><div class="flex items-start gap-3 mb-6"><div class="flex-shrink-0">' + smallMascot(50) + '</div><div class="flex-1">' + bubble('How did you hear about Maintor?', 0.1) + '</div></div><div class="flex-1 space-y-2 overflow-y-auto hide-scrollbar pb-4">' + opts.map(function(o, i) { var sel = howHeard === o; return '<button onclick="setOption(\'howHeard\',\'' + o + '\')" class="option-card w-full p-4 rounded-xl text-left border animate-fade-in" style="background:' + (sel ? C.primaryGlow : C.bgCard) + ';border-color:' + (sel ? C.primary : C.border) + ';color:' + (sel ? C.primary : C.text) + ';font-weight:500;animation-delay:' + (0.1 + i * 0.03) + 's">' + o + '</button>'; }).join('') + '</div></div><div class="p-6 pt-0"><div class="max-w-lg mx-auto">' + primaryBtn('Continue', 'goNext()', !howHeard) + '</div></div></div>';
    }

    function buildingScreen() { setTimeout(function() { step++; render(); }, 3000); return '<div class="min-h-screen flex flex-col items-center justify-center p-6" style="background:' + C.bgDark + '"><div class="relative mb-8 animate-float">' + robotMascot(160, 'default', false) + '</div><p class="text-lg font-semibold uppercase tracking-widest mb-4 animate-pulse-text" style="color:' + C.textMuted + '">Course Building...</p><p class="text-center max-w-xs animate-fade-in" style="color:' + C.textSecondary + ';animation-delay:0.5s">Get ready to join the <span style="color:' + C.sand + ';font-weight:bold">50,000 people</span> learning AI with Maintor!</p></div>'; }

    function finalSuccessScreen() { var displayName = name || 'Learner'; return '<div class="min-h-screen flex flex-col" style="background:' + C.bgDark + '"><div class="flex-1 flex flex-col items-center justify-center p-6"><div class="mb-6 animate-fade-in">' + bubble("You're all set, " + displayName + "! Let's start your AI learning journey! üéâ") + '</div><div class="animate-pop rounded-full" style="animation-delay:0.3s">' + robotMascot(180, 'excited', true) + '</div></div><div class="p-6">' + primaryBtn('Start Learning', "window.location.href='/dashboard'") + '</div></div>'; }

    function render() {
      var app = document.getElementById('app');
      var html = '';
      if (isLoginMode) { html = loginScreen(); app.innerHTML = html; setTimeout(function() { var e = document.getElementById('loginEmail'); if (e && email) e.value = email; var p = document.getElementById('loginPassword'); if (p && password) p.value = password; if (e) e.focus(); }, 10); return; }
      switch(step) {
        case 0: html = welcomeScreen(); break;
        case 1: html = createProfilePrompt(); break;
        case 2: html = ageScreen(); break;
        case 3: html = nameScreen(); break;
        case 4: html = emailScreen(); break;
        case 5: html = passwordScreen(); break;
        case 6: html = profileSuccessScreen(); break;
        case 7: html = introScreen("Hi! I'm your AI learning buddy!"); break;
        case 8: html = introScreen("Just a few questions to personalize your learning!", "few questions"); break;
        case 9: html = whatToLearnScreen(); break;
        case 10: html = whyLearningScreen(); break;
        case 11: html = experienceScreen(); break;
        case 12: html = introScreen("Maintor is designed to be fun like a game!"); break;
        case 13: html = dailyGoalScreen(); break;
        case 14: html = benefitsScreen(); break;
        case 15: html = howHeardScreen(); break;
        case 16: html = buildingScreen(); break;
        default: html = finalSuccessScreen();
      }
      app.innerHTML = html;
      setTimeout(function() {
        var ageInput = document.getElementById('age'); if (ageInput && age) ageInput.value = age;
        var nameInput = document.getElementById('name'); if (nameInput && name) nameInput.value = name;
        var emailInput = document.getElementById('email'); if (emailInput && email) emailInput.value = email;
        var passwordInput = document.getElementById('password'); if (passwordInput && password) passwordInput.value = password;
        ['age', 'name', 'email', 'password'].forEach(function(id) { var el = document.getElementById(id); if (el && !el.value) el.focus(); });
      }, 10);
    }

    window.goNext = function() { step++; render(); };
    window.goBack = function() { if (step > 0) { step--; render(); } };
    window.skipToOnboarding = function() { step = 7; render(); };
    window.goToLogin = function() { isLoginMode = true; email = ''; password = ''; showPassword = false; render(); };
    window.goToWelcome = function() { isLoginMode = false; email = ''; password = ''; step = 0; render(); };

    window.updateLoginEmail = function(value) { email = value; var isValid = email.includes('@') && email.includes('.'); var input = document.getElementById('loginEmail'); if (input) input.style.borderColor = isValid ? C.primary : C.border; var iconDiv = document.getElementById('loginEmailIcon'); if (iconDiv) iconDiv.innerHTML = isValid ? '<div class="w-6 h-6 rounded-full flex items-center justify-center" style="background:' + C.accent + '"><svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/></svg></div>' : ''; updateLoginButton(); };
    window.updateLoginPassword = function(value) { password = value; var input = document.getElementById('loginPassword'); if (input) input.style.borderColor = password.length > 0 ? C.primary : C.border; updateLoginButton(); };
    window.toggleLoginPassword = function() { showPassword = !showPassword; var input = document.getElementById('loginPassword'); if (input) { var cursorPos = input.selectionStart; input.type = showPassword ? 'text' : 'password'; input.setSelectionRange(cursorPos, cursorPos); var eyeIcon = document.getElementById('loginEyeIcon'); if (eyeIcon) eyeIcon.innerHTML = showPassword ? '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>' : '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"/>'; } };
    function updateLoginButton() { var emailIsValid = email.includes('@') && email.includes('.'); var canLogin = emailIsValid && password.length > 0; var btn = document.getElementById('loginBtn'); if (btn) { btn.disabled = !canLogin; btn.style.background = canLogin ? 'linear-gradient(135deg, ' + C.primary + ' 0%, ' + C.primaryDark + ' 100%)' : C.bgElevated; btn.style.color = canLogin ? 'white' : C.textMuted; btn.style.boxShadow = canLogin ? '0 4px 0 ' + C.primaryDarker : 'none'; } }
    window.handleLogin = function() { alert('Login successful! Navigating to home page...'); };

    window.updateAge = function(value) { age = value; var isValid = age.length > 0 && parseInt(age) > 0 && parseInt(age) < 120; var input = document.getElementById('age'); if (input) input.style.borderColor = isValid ? C.primary : C.border; var iconDiv = document.getElementById('ageIcon'); if (iconDiv) iconDiv.innerHTML = isValid ? '<div class="w-6 h-6 rounded-full flex items-center justify-center" style="background:' + C.accent + '"><svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/></svg></div>' : ''; var btn = document.getElementById('ageBtn'); if (btn) { btn.disabled = !isValid; btn.style.background = isValid ? 'linear-gradient(135deg, ' + C.primary + ' 0%, ' + C.primaryDark + ' 100%)' : C.bgElevated; btn.style.color = isValid ? 'white' : C.textMuted; btn.style.boxShadow = isValid ? '0 4px 0 ' + C.primaryDarker : 'none'; } };
    window.updateName = function(value) { name = value; var hasValue = name.length > 0; var input = document.getElementById('name'); if (input) input.style.borderColor = hasValue ? C.primary : C.border; var iconDiv = document.getElementById('nameIcon'); if (iconDiv) iconDiv.innerHTML = hasValue ? '<div class="w-6 h-6 rounded-full flex items-center justify-center" style="background:' + C.accent + '"><svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/></svg></div>' : ''; var btn = document.getElementById('nameBtn'); if (btn) { btn.disabled = !hasValue; btn.style.background = hasValue ? 'linear-gradient(135deg, ' + C.primary + ' 0%, ' + C.primaryDark + ' 100%)' : C.bgElevated; btn.style.color = hasValue ? 'white' : C.textMuted; btn.style.boxShadow = hasValue ? '0 4px 0 ' + C.primaryDarker : 'none'; } };
    window.updateEmail = function(value) { email = value; emailError = ''; var hasValue = email.length > 0; var isValid = email.includes('@') && email.includes('.'); var input = document.getElementById('email'); if (input) input.style.borderColor = (hasValue && isValid) ? C.primary : C.border; var iconsDiv = document.getElementById('emailIcons'); if (iconsDiv) { if (hasValue && isValid) { iconsDiv.innerHTML = '<div class="w-6 h-6 rounded-full flex items-center justify-center" style="background:' + C.accent + '"><svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/></svg></div>'; } else if (hasValue) { iconsDiv.innerHTML = '<button type="button" onclick="clearEmail()" class="w-6 h-6 rounded-full flex items-center justify-center" style="background:' + C.textMuted + '"><svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg></button>'; } else { iconsDiv.innerHTML = ''; } } var btn = document.getElementById('emailBtn'); if (btn) { btn.disabled = !hasValue; btn.style.background = hasValue ? 'linear-gradient(135deg, ' + C.primary + ' 0%, ' + C.primaryDark + ' 100%)' : C.bgElevated; btn.style.color = hasValue ? 'white' : C.textMuted; btn.style.boxShadow = hasValue ? '0 4px 0 ' + C.primaryDarker : 'none'; } var errorEl = document.getElementById('emailError'); if (errorEl) { errorEl.style.display = 'none'; errorEl.textContent = ''; } };
    window.clearEmail = function() { email = ''; emailError = ''; var input = document.getElementById('email'); if (input) { input.value = ''; input.style.borderColor = C.border; input.focus(); } var iconsDiv = document.getElementById('emailIcons'); if (iconsDiv) iconsDiv.innerHTML = ''; };
    window.validateEmail = function() { if (!email.includes('@') || !email.includes('.')) { emailError = 'Invalid email address'; var errorEl = document.getElementById('emailError'); if (errorEl) { errorEl.textContent = emailError; errorEl.style.display = 'block'; } var input = document.getElementById('email'); if (input) input.style.borderColor = C.error; } else { emailError = ''; goNext(); } };
    window.updatePassword = function(value) { password = value; var hasValue = password.length > 0; var isValid = password.length >= 6; var input = document.getElementById('password'); if (input) input.style.borderColor = isValid ? C.primary : C.border; var hint = document.getElementById('passwordHint'); if (hint) hint.style.display = (!isValid && hasValue) ? 'block' : 'none'; var btn = document.getElementById('passwordBtn'); if (btn) { btn.disabled = !isValid; btn.style.background = isValid ? 'linear-gradient(135deg, ' + C.primary + ' 0%, ' + C.primaryDark + ' 100%)' : C.bgElevated; btn.style.color = isValid ? 'white' : C.textMuted; btn.style.boxShadow = isValid ? '0 4px 0 ' + C.primaryDarker : 'none'; } };
    window.togglePasswordView = function() { showPassword = !showPassword; var input = document.getElementById('password'); if (input) { var cursorPos = input.selectionStart; input.type = showPassword ? 'text' : 'password'; input.setSelectionRange(cursorPos, cursorPos); var eyeIcon = document.getElementById('eyeIcon'); if (eyeIcon) eyeIcon.innerHTML = showPassword ? '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>' : '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"/>'; } };
    window.setOption = function(field, value) { if (field === 'whatToLearn') whatToLearn = value; if (field === 'whyLearning') whyLearning = value; if (field === 'experience') experience = value; if (field === 'dailyGoal') dailyGoal = value; if (field === 'howHeard') howHeard = value; render(); };

    render();
  </script>
</body>
</html>
          `
        }}
      />
    </>
  );
}
